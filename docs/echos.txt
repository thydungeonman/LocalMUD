Echoes – A Quick Reference Guide

1. What Is an Echo?
An echo is a hidden, location‑specific line of text that appears when a player enters or actively listens in to a particular room. Think of it as a whispered memory, a forgotten rumor, or a ghostly fragment of the past that only reveals itself to those who are paying attention.

Trigger – Either automatically on entry (with a set probability) or manually via the listen command.
Visibility – Each echo can be shown only once per player‑session unless explicitly reset by game logic.
Purpose – Adds atmosphere, hints at lore, introduces optional side quests, or simply rewards curiosity.

2. Core Properties
Property	Type	Description
text	string	The content that will be displayed to the player.
chance	int (1‑100)	Probability (percent) that the echo triggers on room entry. If omitted, defaults to 0 % (never auto‑trigger).
once_per_player	bool	When true, a single player can only see the echo once ever. Set to false if you want it to be repeatable each session.
tags	array of strings	Optional metadata used for filtering or triggering special effects (e.g., "quest_start", "hint").

3. Where Do Echoes Live?
Echoes are stored in a room‑specific dictionary:

room_echoes = {
    "The Steeping Leaf": [
        {"text":"A faint steam curls around the teacup, whispering... 'The kettle remembers.'",
         "chance":20,
         "once_per_player":True},
        ...
    ],
    "The Die is Cast": [ ... ]
}

Room Key – The exact name of the room as it appears in room_description.
List Order – Not significant; echoes are chosen randomly based on their chance.

4. How Echoes Are Triggered

4.1 On Entry (Automatic)
When a player moves into a room, the system runs:

for idx, echo in enumerate(room_echoes.get(room_name, [])):
    if not seen_before(echo):
        if random.randint(1,100) <= echo['chance']:
            display_echo(echo)
            mark_seen(echo)
            break  # Only one automatic echo per entry
Why only one?

To keep the experience subtle; too many whispers at once can overwhelm.

4.2 By Command (listen)
Players can type listen to deliberately search for hidden words:

cmd_listen(player):
    unseen = [e for e in room_echoes[player.room] if not seen_before(e)]
    if unseen:
        echo = random.choice(unseen)
        display_echo(echo)
        mark_seen(echo)
    else:
        print("You listen intently, but nothing beyond the ordinary sounds reaches your ears.")

5. Persistence & State
Session‑Only – By default, seen_before() checks an in‑memory set tied to the player’s session.
Long‑Term – If you want echoes to remain hidden across reboots, store seen flags in a database or persistent file (e.g., JSON per player).
def mark_seen(echo):
    if echo["once_per_player"]:
        persistent_store[player.id]["seen_echoes"].add(echo_id)

6. Practical Uses
Use Case	How Echoes Help
Lore	A whispered line reveals a forgotten fact about the world.
Hints	Subtle guidance toward an objective (e.g., “The door opens when the wind blows.”).
Atmosphere	Adds texture to otherwise mundane rooms.
Quest Triggers	Echoes tagged with "quest_start" can automatically start a side‑story.
Replay Value	Players who revisit rooms may discover new echoes if they were not seen before.

7. Example Echo Texts
“The kettle remembers the first tea you brewed, Alex.” – The Steeping Leaf
“Behind the dice lies a secret path; only those who listen will see it.” – The Die is Cast
“A rustle in the archive’s margins whispers: ‘Accessibility is not an afterthought.’” – Private Archive
Feel free to tailor these to fit your game’s tone and narrative.

8. Integration Checklist
Define Echoes – Add entries to room_echoes for each relevant room.
Adjust Chances – Fine‑tune the chance values so echoes feel rare but not impossible.
Set Persistence – Decide whether echoes are session‑only or permanent per player.
Test – Run through a few rooms, checking both automatic triggers and manual listen.
Balance – Ensure that echo content adds value without breaking gameplay flow.

9. FAQ

Question	Answer
Can multiple echoes trigger at once?	By design, only one auto‑trigger per entry; however, a player can receive several via listen if they exist.
Do echoes affect game mechanics directly?	Only if you explicitly link them to quest tags or scripted events.
How do I reset an echo for a player?	Remove the echo’s ID from their persistent “seen” list, or set once_per_player=False.
Enjoy weaving whispers into your world!